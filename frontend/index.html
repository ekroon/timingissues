<!doctype html>
<html lang="en">
<head>
<title>Scoreboard v0</title>
<link href="css/screen.css" rel="stylesheet" type="text/css" />
<style>
body { font-size: 32px;}
#countdown { font-size: 400%;}
.score {font-size: 650%; }
.team {font-size: 100%;}
#countdown, .score, .team {text-align: center;}
.score {padding: 0; margin: 0;}

</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
<script type="text/javascript" src="js/countdown/jquery.countdown.min.js"></script>
<script type="text/javascript" src="socket.io/socket.io.js"></script>
<script type="text/javascript" src="js/IObus.js"></script>
<script type="text/javascript">
var socket;
$(document).ready(function() {
   	var tillDate = new Date(); 
	tillDate.setMinutes(60);
	$('#countdown').countdown({until: tillDate, format: 'MS', layout: '{mn}:{snn}'});

	$(window).bind('resize', function()
    {
        ResizeFont();
    }).trigger('resize');
	
	var bus = new IOBus('scoreboard', {test: "value" }, {test2: "value"} );
	bus.subscribe('score-update', SetScore)
	bus.connect();

	
 });
function ResizeFont() {
	//Standard height, for which the body font size is correct
	var preferredHeight = 500;  
	var fontsize = 32.0;
	var displayHeight = $(window).height();
	var percentage = displayHeight / preferredHeight;
	var newFontSize = Math.floor(fontsize * percentage);
	$("body").css("font-size", newFontSize + "px");
}

function SetScore(scoreObject) {
	$('#home-score').html(scoreObject.home);
	$('#away-score').html(scoreObject.away);
}

function ProcessMessage(messageString) {
	var message = $.parseJSON(messageString);
	if (message.type == 'score-update') {
		SetScore(message.data);
	}
}

</script>
</head>
<body>
<div id="header">
	<p>Scoreboard v0</p>
</div>
<div class="colmask threecol">
	<div class="colmid">
		<div class="colleft">
			<div class="col1">
				<!-- Column 1 start: center -->
					<div id="countdown">00:00</div>
				<!-- Column 1 end -->
			</div>
			<div class="col2">
				<!-- Column 2 start: left -->
				<div id="home-score" class="score">15</div>
				<div id="home-team" class="team">DiscDevilsTwente</div>
				<!-- Column 2 end -->
			</div>
			<div class="col3">
				<!-- Column 3 start: right -->
				<div id="away-score" class="score">1</div>
				<div id="away-team" class="team">Test naam 2</div>				
				<!-- Column 3 end -->
			</div>
		</div>
	</div>
</div>
<div id="footer">
	<p>Info voor volgende wedstrijden enzo</p>
</div>

</body>
</html>